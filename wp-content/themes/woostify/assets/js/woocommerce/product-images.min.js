"use strict";if(void 0===woostifyEvent)var woostifyEvent={carouselActionReady:[]};var galleries=document.querySelectorAll(".product-gallery");function woostifyStickySummary(gallery){if(woostify_woocommerce_general.enabled_sticky_product_summary){var summary=!!document.body.classList.contains("has-gallery-list-layout ")&&gallery.querySelector(".product-summary");if(summary&&!(window.innerWidth<992)&&!(gallery.offsetHeight<=summary.offsetHeight)){var sidebarStickCmnKy=new WSYSticky(".summary.entry-summary",{stickyContainer:".product-page-container",marginTop:parseInt(woostify_woocommerce_general.sticky_top_space),marginBottom:parseInt(woostify_woocommerce_general.sticky_bottom_space)});return jQuery("form.variations_form").on("found_variation",(function(){sidebarStickCmnKy.update()})),sidebarStickCmnKy}}}function renderSlider(element,_options){return!!element&&(!element.classList.contains("flickity-enabled")&&(!(element.querySelectorAll(_options.cellSelector).length<2)&&new Flickity(element,_options)));var items}window.addEventListener("load",(function(){galleries&&(galleries.forEach((function(gallery,index){woostifyStickySummary(gallery)})),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),200))}));class WoostifyGallery{constructor(selector,options){var gallery=this;return"string"==typeof selector&&(selector=document.querySelector(selector)),this.el=selector,this.mobileSlider={},this.imageCarousel={},this.thumbCarousel={},this.options=options,this.sliderOptions={...options.main},this.thumbOptions={...options.thumb},this.init(),this}init(){var gallery=this,galleryElement=this.el;this.productThumbnails=this.getProductThumbnails(),this.checkDragable(),this.noSliderLayout=galleryElement.classList.contains("column-style")||galleryElement.classList.contains("grid-style"),this.prevBtn=document.createElement("button"),this.nextBtn=document.createElement("button"),this.initSlider(),this.events()}initSlider(){var gallery=this,galleryElement=gallery.el;if(gallery.noSliderLayout)gallery.woostifyGalleryCarouselMobile();else{if(gallery.productThumbnails=gallery.getProductThumbnails(),!gallery.productThumbnails)return!1;gallery.sliderOptions.on={ready:function(){gallery.changeImageCarouselButtonIcon(),gallery.calculateVerticalSliderHeight()}},gallery.imageCarousel=gallery.renderSlider(gallery.sliderOptions.container,gallery.sliderOptions),gallery.galleryThumbnailCarousel()}"function"==typeof easyZoomHandle&&easyZoomHandle(),"function"==typeof initPhotoSwipe&&initPhotoSwipe(".product-images-container"),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),200)}renderSlider(element,_options){return!!element&&new Flickity(element,_options)}createImages(fullSrc,src,size){var item='<figure class="image-item ez-zoom" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">';return item+="<a href="+fullSrc+" data-size="+size+' itemprop="contentUrl" data-elementor-open-lightbox="no">',item+="<img src="+src+' itemprop="thumbnail">',item+="</a>",item+="</figure>"}createThumbnails(src){var item='<div class="thumbnail-item">';return item+='<img src="'+src+'">',item+="</div>"}changeImageCarouselButtonIcon(){var galleryElement=this.el,imageNextBtn=galleryElement.querySelector(".flickity-button.next"),imagePrevBtn=galleryElement.querySelector(".flickity-button.previous");imageNextBtn&&(imageNextBtn.innerHTML=this.options.next_icon),imagePrevBtn&&(imagePrevBtn.innerHTML=this.options.prev_icon)}woostifyGalleryCarouselMobile(){var gallery=this,galleryElement=gallery.el,mobileGallery;!galleryElement.querySelector(".has-gallery-list-layout .product-gallery.has-product-thumbnails")||window.innerWidth>991||(gallery.sliderOptions.on={ready:function(){gallery.changeImageCarouselButtonIcon()}},gallery.mobileSlider=new Flickity(galleryElement.querySelector(".product-images-container"),gallery.sliderOptions))}calculateVerticalSliderHeight(){var gallery=this,galleryElement=gallery.el;if(window.matchMedia("( min-width: 768px )").matches&&galleryElement.classList.contains("vertical-style")){var currFirstImage=galleryElement.querySelector(".image-item img");gallery._setVerticalSliderHeight(currFirstImage),gallery.waitImageLoad(currFirstImage,loadedImg=>{gallery._setVerticalSliderHeight(loadedImg)}).then(loadedImg=>{}).catch(err=>{console.error("Error loading image",err)})}}_setVerticalSliderHeight(img){var imgHeight=img?img.offsetHeight:0,productThumbnails=this.getProductThumbnails();imgHeight&&(productThumbnails.style.maxHeight=imgHeight+"px")}isImageOk(img){return!!img.complete&&(void 0===img.naturalWidth||0!=img.naturalWidth)}async waitImageLoad_v2(img,callback){var check=0,intv=0;intv=setInterval((function(){var imgHeight;IsImageOk(img)&&check<20&&((img?img.offsetHeight:0)&&_setVerticalSliderHeight(img),clearInterval(intv));check++}),200)}async waitImageLoad(img,callback){return new Promise((resolve,reject)=>{img.addEventListener("load",()=>{callback(img),resolve(img)}),img.addEventListener("error",reject)})}galleryThumbnailCarousel(){this.horizontalThumbnailCarousel()||this.verticalThumbnailCarousel()}verticalThumbnailCarousel(){var gallery=this,galleryElement=this.el,productThumbnails=this.getProductThumbnails();if(productThumbnails){var thumbOptions=this.thumbOptions;window.matchMedia("( max-width: 767px )").matches?this.thumbCarousel=new Flickity(productThumbnails,thumbOptions):galleryElement.classList.contains("vertical-style")?(this.calculateVerticalSliderHeight(),this.verticalThumbnailSliderAction(this),this.addThumbButtons()):this.thumbCarousel=new Flickity(productThumbnails,thumbOptions)}}verticalThumbnailSliderAction(){var gallery=this,productThumbnails=this.getProductThumbnails(),thumbNavImages=productThumbnails.querySelectorAll(".thumbnail-item"),imageCarousel=this.imageCarousel;thumbNavImages[0].classList.add("is-nav-selected"),thumbNavImages[0].classList.add("is-selected"),thumbNavImages.forEach((function(thumbNavImg,thumbIndex){thumbNavImg.addEventListener("click",(function(){imageCarousel.select(thumbIndex)}))}));var thumbImgHeight=0<imageCarousel.selectedIndex?thumbNavImages[imageCarousel.selectedIndex].offsetHeight:thumbNavImages[0].offsetHeight,thumbHeight=productThumbnails.offsetHeight;imageCarousel.on("change",(function(){productThumbnails.querySelectorAll(".thumbnail-item").forEach((function(thumb){thumb.classList.remove("is-nav-selected","is-selected")}));var selected=0<=imageCarousel.selectedIndex?thumbNavImages[imageCarousel.selectedIndex]:thumbNavImages[0];selected.classList.add("is-nav-selected","is-selected");var scrollY=selected.offsetTop+productThumbnails.scrollTop-(thumbHeight+thumbImgHeight)/2;productThumbnails.scrollTo({top:scrollY,behavior:"smooth"})}))}addThumbButtons(){var gallery=this,galleryElement=this.el,productThumbnails,productThumbnailsWrapper=this.getProductThumbnails().parentElement;this.prevBtn.classList.add("thumb-btn","thumb-prev-btn","prev"),this.prevBtn.innerHTML=this.options.vertical_prev_icon,this.nextBtn.classList.add("thumb-btn","thumb-next-btn","next"),this.nextBtn.innerHTML=this.options.vertical_next_icon,productThumbnailsWrapper.appendChild(this.prevBtn),productThumbnailsWrapper.appendChild(this.nextBtn),this.displayThumbButtons(),this.changeImageCarouselButtonEvents()}displayThumbButtons(){var gallery=this,productThumbnails=this.getProductThumbnails(),thumbs=productThumbnails.querySelectorAll(".thumbnail-item"),totalThumbHeight=0;thumbs.length&&thumbs.forEach((function(thumb){var thumbHeight=thumb.offsetHeight;thumbHeight+=parseInt(window.getComputedStyle(thumb).getPropertyValue("margin-top")),thumbHeight+=parseInt(window.getComputedStyle(thumb).getPropertyValue("margin-bottom")),totalThumbHeight+=thumbHeight})),totalThumbHeight>productThumbnails.offsetHeight?(productThumbnails.classList.add("has-buttons"),this.nextBtn.style.display="block",this.prevBtn.style.display="block"):(productThumbnails.classList.remove("has-buttons"),this.nextBtn.style.display="none",this.prevBtn.style.display="none")}horizontalThumbnailCarousel(){var gallery=this,galleryElement=this.el,result=!1;if(this.productThumbnails=this.getProductThumbnails(),this.productThumbnails){var productThumbnails=this.productThumbnails,thumbCarousel=this.thumbCarousel,thumbOptions=this.thumbOptions;if(galleryElement.classList.contains("horizontal-style")||window.matchMedia("( max-width: 767px )").matches){var thumbEls=productThumbnails.querySelectorAll(".thumbnail-item"),totalWidth=0;thumbEls.length&&thumbEls.forEach((function(thumbEl){var thumbWidth=thumbEl.offsetWidth;thumbWidth+=parseInt(window.getComputedStyle(thumbEl).getPropertyValue("margin-left")),thumbWidth+=parseInt(window.getComputedStyle(thumbEl).getPropertyValue("margin-right")),totalWidth+=thumbWidth})),totalWidth>=productThumbnails.offsetWidth?(thumbOptions.groupCells="60%",thumbOptions.wrapAround=!0):(thumbOptions.groupCells="3",thumbOptions.wrapAround=!1),thumbCarousel&&thumbCarousel.slider&&thumbCarousel.destroy(),this.thumbCarousel=new Flickity(this.productThumbnails,thumbOptions),result=!0}return result}}resetCarousel(){var gallery=this;this.imageCarousel||this.imageCarousel.slider||imageCarousel.select(0),this.mobileSlider||this.mobileSlider.slider||mobileSlider.select(0)}updateGallery(data,reset,variationId){var gallery=this,galleryElement=this.el;if(data.length&&!document.documentElement.classList.contains("quick-view-open")){for(var images="",thumbnails="",imageCarousel=this.imageCarousel||{},thumbCarousel=this.thumbCarousel||{},mobileSlider=this.mobileSlider||{},i=0,j=data.length;i<j;i++)if(reset){var size=data[i].full_src_w+"x"+data[i].full_src_h;images+=this.createImages(data[i].full_src,data[i].src,size),thumbnails+=data.length>1?this.createThumbnails(data[i].gallery_thumbnail_src):""}else if(variationId&&variationId==data[i][0].variation_id)if(1>=data[i].length-1){thumbnails="";for(var x=1,y=data[i].length;x<y;x++){var size=data[i][x].full_src_w+"x"+data[i][x].full_src_h;images+=this.createImages(data[i][x].full_src,data[i][x].src,size)}}else for(var x=1,y=data[i].length;x<y;x++){var size=data[i][x].full_src_w+"x"+data[i][x].full_src_h;images+=this.createImages(data[i][x].full_src,data[i][x].src,size),thumbnails+=data[i].length>1?this.createThumbnails(data[i][x].gallery_thumbnail_src):""}if(console.log(imageCarousel),imageCarousel&&imageCarousel.slider&&imageCarousel.destroy(),thumbCarousel&&thumbCarousel.slider&&thumbCarousel.destroy(),mobileSlider&&mobileSlider.slider&&mobileSlider.destroy(),images&&galleryElement.querySelector(".product-images")&&(galleryElement.querySelector(".product-images").querySelector(".product-images-container").innerHTML=images),galleryElement.querySelector(".product-thumbnail-images"))if(""!==thumbnails){var productThumbnailsWrapper=galleryElement.querySelector(".product-thumbnail-images").querySelector(".product-thumbnail-images-container");productThumbnailsWrapper||(productThumbnailsWrapper=document.createElement("div")).classList.add("product-thumbnail-images-container"),productThumbnailsWrapper.classList.remove("flickity-enabled"),galleryElement.querySelector(".product-thumbnail-images").innerHTML="",galleryElement.querySelector(".product-thumbnail-images").appendChild(productThumbnailsWrapper).innerHTML=thumbnails,galleryElement.querySelector(".product-gallery")&&galleryElement.querySelector(".product-gallery").classList.add("has-product-thumbnails"),galleryElement.classList.contains("product-gallery")&&galleryElement.classList.add("has-product-thumbnails")}else galleryElement.querySelector(".product-thumbnail-images").innerHTML="";this.initSlider()}}checkDragable(){window.matchMedia("( min-width: 768px )").matches&&this.el.classList.contains("vertical-style")&&(this.thumbOptions.draggable=!1)}getProductThumbnails(){var gallery=this,galleryElement=this.el;return"string"==typeof this.thumbOptions.asNavFor&&galleryElement.querySelector(this.thumbOptions.asNavFor)&&(this.thumbOptions.asNavFor=galleryElement.querySelector(this.thumbOptions.asNavFor)),"string"==typeof this.sliderOptions.container&&galleryElement.querySelector(this.sliderOptions.container)&&(this.sliderOptions.container=galleryElement.querySelector(this.sliderOptions.container)),"string"==typeof this.thumbOptions.container&&galleryElement.querySelector(this.thumbOptions.container)&&(this.thumbOptions.container=galleryElement.querySelector(this.thumbOptions.container)),"string"!=typeof this.thumbOptions.container&&this.thumbOptions.container}events(){var gallery=this,galleryElement=gallery.el;window.addEventListener("resize",(function(){gallery.checkDragable()})),gallery.changeImageCarouselButtonEvents(),gallery.listenResetVariations(),gallery.listenFoundVariations()}changeImageCarouselButtonEvents(){var gallery=this,galleryElement,thumbButtons=gallery.el.querySelectorAll(".thumb-btn");thumbButtons.length&&thumbButtons.forEach((function(thumbBtn){thumbBtn.addEventListener("click",(function(){var currBtn=this;this.classList.contains("prev")?gallery.imageCarousel.previous():gallery.imageCarousel.next()}))}))}listenFoundVariations(){var gallery=this,galleryElement=gallery.el;gallery.listEvents=gallery.listEvents||{},gallery.listEvents.found_variation||(jQuery("form.variations_form").on("found_variation",(function(e,variation){if("undefined"!=typeof woostify_variation_gallery&&woostify_variation_gallery.length)gallery.updateGallery(woostify_variation_gallery,!1,variation.variation_id);else if(variation.variation_gallery_images){var thumbs=galleryElement.querySelector(".product-thumbnail-images"),has_gallery;if(variation.variation_gallery_images.length>1||variation.variation_gallery_images.length&&variation.image&&variation.variation_gallery_images[0].full_src!=variation.image.full_src)gallery.updateGallery(variation.variation_gallery_images,!0,variation.variation_id),thumbs&&thumbs.classList.add("variation-gallery");else if("undefined"!=typeof woostify_default_gallery&&woostify_default_gallery.length){var images=[];variation.image?(images.push(variation.image),woostify_default_gallery.forEach((function(item,index,default_gallery){index&&images.push(item)}),images)):images=woostify_default_gallery,gallery.updateGallery(gallery,images,!0),thumbs&&thumbs.classList.remove("variation-gallery")}}})),gallery.listEvents.found_variation=1)}listenResetVariations(){var gallery=this,galleryElement=gallery.el;gallery.listEvents=gallery.listEvents||{},gallery.listEvents.reset_variations||(jQuery(".reset_variations").on("click",(function(){"undefined"!=typeof woostify_default_gallery&&woostify_default_gallery.length&&(gallery.updateGallery(woostify_default_gallery,!0),galleryElement.querySelector(".product-thumbnail-images")&&galleryElement.querySelector(".product-thumbnail-images").classList.remove("variation-gallery")),gallery.resetCarousel(),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),200),(document.body.classList.contains("elementor-editor-active")||document.body.classList.contains("elementor-editor-preview"))&&(galleryElement.querySelector(".product-thumbnail-images-container")||galleryElement.querySelector(".product-gallery").classList.remove("has-product-thumbnails"))})),gallery.listEvents.reset_variations=!0)}}var woostifyGalleries=[];document.addEventListener("DOMContentLoaded",(function(){woostifyEvent.productImagesReady||(galleries.forEach((function(galleryElement,index){var gallery=new WoostifyGallery(galleryElement,woostify_product_images_slider_options);woostifyGalleries.push(gallery)})),"function"==typeof onElementorLoaded&&onElementorLoaded((function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/global",(function(){setTimeout((function(){var galleries;document.querySelectorAll(".product-gallery").forEach((function(galleryElement,index){renderSlider(galleryElement.querySelector(woostify_product_images_slider_options.main.container),woostify_product_images_slider_options)}))}),200)}))})),woostifyEvent.productImagesReady=1)}));