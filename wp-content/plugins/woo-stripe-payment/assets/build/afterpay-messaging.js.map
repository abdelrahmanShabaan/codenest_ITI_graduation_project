{"version":3,"file":"afterpay-messaging.js","mappings":"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","sources":["webpack://woo-stripe-payment/./assets/js/frontend/afterpay-messaging/index.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/createClass.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://woo-stripe-payment/./assets/js/frontend/afterpay-messaging/afterpay-category.js","webpack://woo-stripe-payment/external window [\"wc_stripe\"]","webpack://woo-stripe-payment/webpack/bootstrap"],"sourcesContent":["import {stripe} from '@paymentplugins/wc-stripe';\nimport AfterpayCategoryMessage from './afterpay-category';\n\nif (typeof wc_stripe_bnpl_shop_params !== 'undefined') {\n    new AfterpayCategoryMessage(stripe, wc_stripe_bnpl_shop_params);\n}","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","class AfterpayCategoryMessage {\n\n    constructor(stripe, data) {\n        this.id = 'stripe_afterpay';\n        this.data = data;\n        this.stripe = stripe;\n        this.elements = stripe.elements({...this.data[this.id].elementOptions});\n        this.initialize();\n    }\n\n    initialize() {\n        this.createMessages();\n\n    }\n\n    createMessages() {\n        if (this.isSupportedCurrency(this.data.currency)) {\n            for (const product of this.data.products) {\n                if (this.isSupportedProduct(product, this.data.currency)) {\n                    this.createMessage(product);\n                }\n            }\n        }\n\n    }\n\n    createMessage(product) {\n        const element = this.elements.create('afterpayClearpayMessage', {\n            ...{\n                amount: product.price_cents,\n                currency: this.data.currency,\n                ...this.data[this.id].msgOptions\n            }\n        });\n        const el = this.getMessageContainer(product);\n        if (el) {\n            element.mount(el);\n        }\n    }\n\n    isSupportedCurrency(currency) {\n        return this.data[this.id].supportedCurrencies.includes(currency);\n    }\n\n    isSupportedProduct(product, currency) {\n        if (this.data.product_types.includes(product.product_type)) {\n            const price = product.price;\n            const [country, min, max] = this.data[this.id].requiredParams[currency];\n            return !this.hideIneligible() || min <= price && price <= max;\n        }\n        return false;\n\n    }\n\n    getMessageContainer(product) {\n        let id = `${this.id}-${product.id}`;\n        id = `wc-stripe-shop-message-${id}`;\n        return document.getElementById(`${id}`);\n    }\n\n    hideIneligible() {\n        return this.data[this.id].hideIneligible;\n    }\n\n}\n\nexport default AfterpayCategoryMessage;","module.exports = window[\"wc_stripe\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n"],"names":["module","exports","arr","len","length","i","arr2","Array","isArray","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","obj","value","__esModule","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arrayLikeToArray","o","minLen","n","toString","call","slice","constructor","name","from","test","stripe","data","this","id","elements","elementOptions","initialize","createMessages","isSupportedCurrency","currency","products","product","isSupportedProduct","createMessage","element","create","amount","price_cents","msgOptions","el","getMessageContainer","mount","supportedCurrencies","includes","product_types","product_type","price","requiredParams","min","max","hideIneligible","document","getElementById","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","wc_stripe_bnpl_shop_params","AfterpayCategoryMessage"],"sourceRoot":""}