{"version":3,"file":"link-checkout.js","mappings":"qBAeAA,EAAOC,QAfP,SAAyBC,EAAKC,EAAKC,GAYjC,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,CACT,C,UCPAF,EAAOC,QANP,SAAgCC,GAC9B,OAAOA,GAAOA,EAAIQ,WAAaR,EAAM,CACnC,QAAWA,EAEf,C,uBCJAF,EAAOC,QAAUU,OAAe,M,uBCAhCX,EAAOC,QAAUU,OAAkB,S,GCC/BC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAad,QAGrB,IAAID,EAASY,EAAyBE,GAAY,CAGjDb,QAAS,CAAC,GAOX,OAHAgB,EAAoBH,GAAUd,EAAQA,EAAOC,QAASY,GAG/Cb,EAAOC,OACf,C,+BCtBA,YACkD,+kBAE9BiB,EAFpB,UAEkCC,QAA3BC,aAQP,EAAAC,EAAAA,UAAE,WAAM,QACJ,GAA2B,cAAvBC,oBAAyD,QAAnB,EAACA,0BAAkB,OAAgB,QAAhB,EAAlB,EAAoBC,sBAAc,QAAlC,EAAoCC,KAC3E,OAAO,EAEX,GAAKN,EAAWO,6BAGhB,IACI,IACMC,EADSR,EAAWS,OACNC,kBAAkBV,EAAWW,WAEjD,EAAAR,EAAAA,SAAES,SAASC,MAAMC,GAAG,QAAS,0BAA0B,SAACC,GACpDP,EAAKQ,OAAO,CAACC,MAAOF,EAAEG,cAAchC,OACxC,IAEIkB,mBAAmBe,YACnBX,EAAKQ,OAAO,CAACC,OAAO,EAAAd,EAAAA,SAAE,0BAA0BiB,QAGhDhB,mBAAmBiB,mBAvB3B,EAAAlB,EAAAA,SAAE,kBAAkBmB,SAAS,+BAC7B,EAAAnB,EAAAA,SAAE,kBAAkBoB,OAAM,EAAApB,EAAAA,SAAEC,mBAAmBoB,YA0B3ChB,EAAKM,GAAG,YAAY,SAACW,GAAU,MACsBA,EAAMvC,MAAK,IAArDwC,gBAAAA,OAAe,IAAG,OAAI,EAAEC,EAAc,EAAdA,eAE/B,GAAID,EAAiB,CACjB,IAAME,EAAU,EAAH,CAAIC,KAAMH,EAAgBG,MAASH,EAAgBE,SAChE5B,EAAW8B,yBAAyBF,EACxC,CACA,GAAID,EAAgB,CAChB,IAAMC,EAAU,EAAH,CAAIC,KAAMF,EAAeE,MAASF,EAAeC,SAC9D5B,EAAW+B,wBAAwBH,EACvC,CACA5B,EAAWgC,OAAOC,eAClBjC,EAAWkC,mBAAmBlC,EAAWmC,YACzCnC,EAAWoC,0BACXpC,EAAWqC,iBACPX,GACA1B,EAAWsC,+BAEf,EAAAnC,EAAAA,SAAE,kBAAkBoC,KAAK,WAAW,GAC/BvC,EAAWgC,OAAOQ,SAAS,kBAAqBxC,EAAWgC,OAAOS,QAAQ,kBAC3EzC,EAAW0C,WAAWC,QAAQ,SAEtC,GACJ,CAAE,MAAOC,GACLC,QAAQC,IAAIF,EAChB,CACJ,G","sources":["webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://woo-stripe-payment/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://woo-stripe-payment/external window \"jQuery\"","webpack://woo-stripe-payment/external window [\"wc_stripe\"]","webpack://woo-stripe-payment/webpack/bootstrap","webpack://woo-stripe-payment/./assets/js/frontend/link-checkout.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","module.exports = window[\"jQuery\"];","module.exports = window[\"wc_stripe\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import $ from 'jquery';\nimport wc_stripe from '@paymentplugins/wc-stripe';\n\nconst {credit_card: creditCard} = wc_stripe;\n\nconst addLinkIcon = () => {\n\n    $('#billing_email').addClass('stripe-link-icon-container');\n    $('#billing_email').after($(wcStripeLinkParams.linkIcon));\n}\n\n$(() => {\n    if (wcStripeLinkParams === 'undefined' || !wcStripeLinkParams?.elementOptions?.mode) {\n        return false;\n    }\n    if (!creditCard.is_payment_element_enabled()) {\n        return;\n    }\n    try {\n        const stripe = creditCard.stripe;\n        const link = stripe.linkAutofillModal(creditCard.elements);\n\n        $(document.body).on('keyup', '[name=\"billing_email\"]', (e) => {\n            link.launch({email: e.currentTarget.value});\n        });\n\n        if (wcStripeLinkParams.launchLink) {\n            link.launch({email: $('[name=\"billing_email\"]').val()});\n        }\n\n        if (wcStripeLinkParams.linkIconEnabled) {\n            addLinkIcon();\n        }\n\n        link.on('autofill', (event) => {\n            const {shippingAddress = null, billingAddress} = event.value;\n            // populate the address fields\n            if (shippingAddress) {\n                const address = {name: shippingAddress.name, ...shippingAddress.address};\n                creditCard.populate_shipping_fields(address);\n            }\n            if (billingAddress) {\n                const address = {name: billingAddress.name, ...billingAddress.address};\n                creditCard.populate_billing_fields(address);\n            }\n            creditCard.fields.toFormFields();\n            creditCard.set_payment_method(creditCard.gateway_id);\n            creditCard.show_new_payment_method();\n            creditCard.hide_save_card();\n            if (shippingAddress) {\n                creditCard.maybe_set_ship_to_different();\n            }\n            $('[name=\"terms\"]').prop('checked', true);\n            if (!creditCard.fields.required('billing_phone') || !creditCard.fields.isEmpty('billing_phone')) {\n                creditCard.get_form().trigger('submit');\n            }\n        });\n    } catch (error) {\n        console.log(error);\n    }\n});"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__esModule","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","creditCard","wc_stripe","credit_card","$","wcStripeLinkParams","elementOptions","mode","is_payment_element_enabled","link","stripe","linkAutofillModal","elements","document","body","on","e","launch","email","currentTarget","launchLink","val","linkIconEnabled","addClass","after","linkIcon","event","shippingAddress","billingAddress","address","name","populate_shipping_fields","populate_billing_fields","fields","toFormFields","set_payment_method","gateway_id","show_new_payment_method","hide_save_card","maybe_set_ship_to_different","prop","required","isEmpty","get_form","trigger","error","console","log"],"sourceRoot":""}