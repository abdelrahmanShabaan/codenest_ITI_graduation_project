(()=>{var t,e,r,n,a,i,o,u,c,s,f,l,p,d={506:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}},713:t=>{t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},525:(t,e,r)=>{var n=r(331);function a(e,r,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=a=Reflect.get:t.exports=a=function(t,e,r){var a=n(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(r):i.value}},a(e,r,i||e)}t.exports=a},754:t=>{function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(r)}t.exports=e},205:(t,e,r)=>{var n=r(489);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},318:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}}},585:(t,e,r)=>{var n=r(8),a=r(506);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}},489:t=>{function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e},331:(t,e,r)=>{var n=r(754);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},8:t=>{function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(r)}t.exports=e},428:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(575)),i=n(r(913)),o=n(r(205)),u=n(r(585)),c=n(r(754)),s=n(r(567));var f=function(t){(0,o.default)(f,t);var e,r,n=(e=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(r){var a=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function f(){var t;(0,a.default)(this,f);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))).initialize(),t}return(0,i.default)(f,[{key:"initialize",value:function(){(0,s.default)(document.body).on("updated_wc_div",this.updatedHtml.bind(this)),(0,s.default)(document.body).on("updated_cart_totals",this.updatedHtml.bind(this)),this.createMessage()}},{key:"updatedHtml",value:function(){this.gateway.has_gateway_data()&&this.createMessage()}},{key:"getElementContainer",value:function(){return(0,s.default)("#wc-stripe-affirm-cart-container").length||(0,s.default)(".cart_totals table.shop_table > tbody").append('<tr id="wc-stripe-affirm-cart-container"><td colspan="2"><div id="wc-stripe-affirm-cart-msg"></div></td></tr>'),document.getElementById("wc-stripe-affirm-cart-msg")}}]),f}(n(r(416)).default);e.default=f},384:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(713)),i=n(r(575)),o=n(r(913));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=function(){function t(e,r){(0,i.default)(this,t),this.id="stripe_affirm",this.stripe=e,this.elements=e.elements({locale:"auto"}),this.data=r,this.initialize()}return(0,o.default)(t,[{key:"initialize",value:function(){this.createMessages()}},{key:"createMessages",value:function(){if(this.isSupportedCurrency(this.data.currency)){var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}(this.data.products);try{for(e.s();!(t=e.n()).done;){var r=t.value;this.isSupportedProduct(r.product_type)&&this.createMessage(r)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"isSupportedCurrency",value:function(t){return this.data[this.id].supportedCurrencies.includes(t)}},{key:"createMessage",value:function(t){var e=this.elements.create("affirmMessage",this.getMessageOptions(t)),r=this.getMessageContainer(t);r&&e.mount(r)}},{key:"isSupportedProduct",value:function(t){return this.data.product_types.includes(t)}},{key:"getMessageContainer",value:function(t){var e="".concat(this.id,"-").concat(t.id);return e="wc-stripe-shop-message-".concat(e),document.getElementById("".concat(e))}},{key:"getMessageOptions",value:function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({amount:t.price_cents,currency:this.data.currency},this.data[this.id].messageOptions)}}]),t}();e.default=s},934:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(575)),i=n(r(913)),o=n(r(525)),u=n(r(205)),c=n(r(585)),s=n(r(754)),f=n(r(567));var l=function(t){(0,u.default)(l,t);var e,r,n=(e=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.default)(e);if(r){var a=(0,s.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,c.default)(this,t)});function l(){var t;(0,a.default)(this,l);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))).initialize(),t}return(0,i.default)(l,[{key:"initialize",value:function(){(0,f.default)(document.body).on("updated_checkout",this.updatedCheckout.bind(this)),this.gateway.has_gateway_data()&&this.createMessage()}},{key:"updatedCheckout",value:function(){this.createMessage()}},{key:"createMessage",value:function(){this.gateway.has_gateway_data()&&(0,o.default)((0,s.default)(l.prototype),"createMessage",this).call(this)}},{key:"getElementContainer",value:function(){return(0,f.default)("#wc-stripe-affirm-message-container").length||(0,f.default)('label[for="payment_method_stripe_affirm"]').append('<div id="wc-stripe-affirm-message-container"></div>'),document.getElementById("wc-stripe-affirm-message-container")}}]),l}(n(r(416)).default);e.default=l},388:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(575)),i=n(r(913)),o=n(r(205)),u=n(r(585)),c=n(r(754)),s=n(r(567));var f=function(t){(0,o.default)(f,t);var e,r,n=(e=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.default)(e);if(r){var a=(0,c.default)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.default)(this,t)});function f(){var t;(0,a.default)(this,f);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))).initialize(),t}return(0,i.default)(f,[{key:"initialize",value:function(){(0,s.default)(document.body).on("change",'[name="quantity"]',this.createMessage.bind(this,!0)),(0,s.default)("form.cart").on("found_variation",this.foundVariation.bind(this)),(0,s.default)("form.cart").on("reset_data",this.resetVariationData.bind(this)),this.createMessage()}},{key:"foundVariation",value:function(){var t;(t=this.gateway).found_variation.apply(t,arguments),this.createMessage()}},{key:"resetVariationData",value:function(){var t;(t=this.gateway).reset_variation_data.apply(t,arguments),this.createMessage()}},{key:"getElementContainer",value:function(){return(0,s.default)("#wc-stripe-affirm-product-msg").length||((0,s.default)(".summary .price").length?(0,s.default)(".summary .price").append('<div id="wc-stripe-affirm-product-msg"></div>'):(0,s.default)(".price").length&&(0,s.default)((0,s.default)(".price")[0]).append('<div id="wc-stripe-affirm-product-msg"></div>')),document.getElementById("wc-stripe-affirm-product-msg")}},{key:"getTotalPriceCents",value:function(){var t,e;return this.gateway.has_gateway_data()?(null===(t=this.gateway.get_gateway_data())||void 0===t||null===(e=t.product)||void 0===e?void 0:e.price_cents)*this.getQuantity():0}},{key:"getQuantity",value:function(){var t=(0,s.default)('[name="quantity"]').val();return isNaN(t)&&(t=0),parseInt(t)}}]),f}(n(r(416)).default);e.default=f},416:(t,e,r)=>{var n=r(318);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(713)),i=n(r(575)),o=n(r(913));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var c=function(){function t(e){(0,i.default)(this,t),this.elementType="affirmMessage",this.gateway=e,this.msgElement=null}return(0,o.default)(t,[{key:"isSupported",value:function(){var t,e,r,n,a,i=null===(t=this.gateway)||void 0===t||null===(e=t.get_gateway_data())||void 0===e?void 0:e.currency;return null===(r=this.gateway)||void 0===r||null===(n=r.params)||void 0===n||null===(a=n.supportedCurrencies)||void 0===a?void 0:a.includes(i)}},{key:"createMessage",value:function(){if(this.isSupported()&&this.createMessageElement()){var t=this.getElementContainer();t&&this.mount(t)}}},{key:"createMessageElement",value:function(){var t,e;return this.msgElement?this.msgElement.update(this.getMessageOptions()):this.msgElement=null===(t=this.gateway)||void 0===t||null===(e=t.elements)||void 0===e?void 0:e.create(this.elementType,this.getMessageOptions()),this.msgElement}},{key:"getMessageOptions",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({amount:this.getTotalPriceCents(),currency:this.gateway.get_currency()},this.gateway.params.messageOptions)}},{key:"mount",value:function(t){try{this.msgElement.mount(t)}catch(t){console.log(t)}}},{key:"getElementContainer",value:function(){}},{key:"getTotalPriceCents",value:function(){var t;return null===(t=this.gateway.get_gateway_data())||void 0===t?void 0:t.total_cents}}]),t}();e.default=c},567:t=>{"use strict";t.exports=window.jQuery},707:t=>{"use strict";t.exports=window.wc_stripe}},y={};function v(t){var e=y[t];if(void 0!==e)return e.exports;var r=y[t]={exports:{}};return d[t](r,r.exports,v),r.exports}t=v(318),e=t(v(575)),r=t(v(205)),n=t(v(585)),a=t(v(754)),i=v(707),o=t(v(388)),u=t(v(428)),c=t(v(934)),s=t(v(384)),p=function(t){(0,r.default)(c,t);var i,o,u=(i=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,a.default)(i);if(o){var r=(0,a.default)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,n.default)(this,t)});function c(t){return(0,e.default)(this,c),u.call(this,t)}return c}(i.BaseGateway),"undefined"!=typeof wc_stripe_affirm_cart_params&&new u.default(new p(wc_stripe_affirm_cart_params)),"undefined"!=typeof wc_stripe_affirm_product_params&&(Object.assign(p.prototype,i.ProductGateway.prototype),new o.default(new p(wc_stripe_affirm_product_params))),"undefined"!=typeof wc_stripe_local_payment_params&&null!==(f=wc_stripe_local_payment_params)&&void 0!==f&&null!==(l=f.gateways)&&void 0!==l&&l.stripe_affirm&&new c.default(new p(wc_stripe_local_payment_params.gateways.stripe_affirm)),"undefined"!=typeof wc_stripe_bnpl_shop_params&&new s.default(i.stripe,wc_stripe_bnpl_shop_params)})();
//# sourceMappingURL=affirm-messaging.js.map