{"version":3,"file":"wc-stripe-epo.js","mappings":"qBAeAA,EAAOC,QAfP,SAAyBC,EAAKC,EAAKC,GAYjC,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,CACT,C,UCPAF,EAAOC,QANP,SAAgCC,GAC9B,OAAOA,GAAOA,EAAIQ,WAAaR,EAAM,CACnC,QAAWA,EAEf,C,uBCJAF,EAAOC,QAAUU,OAAe,M,uBCAhCX,EAAOC,QAAUU,OAAkB,S,GCC/BC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAad,QAGrB,IAAID,EAASY,EAAyBE,GAAY,CAGjDb,QAAS,CAAC,GAOX,OAHAgB,EAAoBH,GAAUd,EAAQA,EAAOC,QAASY,GAG/Cb,EAAOC,OACf,C,+BCtBA,YACA,SAAuE,2kBAEvE,IAAMiB,EAAoB,SAACC,GAGvBC,EAAAA,iBAASC,SAAQ,SAAAC,GACTA,EAAQC,sBAERD,EAAQC,sBAGhB,GACJ,GASA,EAAAC,EAAAA,UAAE,WACMJ,EAAAA,iBAASK,SAETL,EAAAA,iBAASC,SAAQ,SAAAC,GAEb,IAAMI,EAAmBJ,EAAQK,qBACjCL,EAAQK,qBAAuB,WAC3B,OAAO,EAAP,KACOD,EAAiBE,KAAKN,KAd5B,EAAAE,EAAAA,SAAE,yBAAyBK,iBAAiBC,QAAO,SAACC,EAAO7B,GACpE,OAAO,EAAP,KAAW6B,GAAK,oBAAG7B,EAAI8B,KAAO9B,EAAIE,OACtC,GAAG,CAAC,GAeI,CACJ,KAEA,EAAAoB,EAAAA,SAAES,SAASC,MAAMC,GAAG,SAAU,wBAAyBjB,GAE/D,G","sources":["webpack://wc_stripe/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://wc_stripe/external window \"jQuery\"","webpack://wc_stripe/external window [\"wc_stripe\"]","webpack://wc_stripe/webpack/bootstrap","webpack://wc_stripe/./packages/woocommerce-tm-extra-product-options/assets/js/product.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","module.exports = window[\"jQuery\"];","module.exports = window[\"wc_stripe\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import $ from 'jquery';\nimport {product_gateways as gateways} from '@paymentplugins/wc-stripe';\n\nconst handleFieldChange = (e) => {\n    let tmcpCalculation = false;\n    // when a extra product option field changes, update the cart calculation\n    gateways.forEach(gateway => {\n        if (gateway.maybe_calculate_cart) {\n            tmcpCalculation = true;\n            gateway.maybe_calculate_cart();\n            tmcpCalculation = false;\n        }\n    });\n}\n\nconst getExtraProductData = () => {\n    const data = $('form.cart .tmcp-field').serializeArray().reduce((carry, obj) => {\n        return {...carry, [obj.name]: obj.value};\n    }, {});\n    return data;\n}\n\n$(() => {\n    if (gateways.length) {\n\n        gateways.forEach(gateway => {\n            // add to cart data function wrapper\n            const getAddToCartData = gateway.get_add_to_cart_data;\n            gateway.get_add_to_cart_data = () => {\n                return {\n                    ...getAddToCartData.call(gateway),\n                    ...getExtraProductData()\n                }\n            }\n        });\n\n        $(document.body).on('change', 'form.cart .tmcp-field', handleFieldChange);\n    }\n})"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__esModule","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","handleFieldChange","e","gateways","forEach","gateway","maybe_calculate_cart","$","length","getAddToCartData","get_add_to_cart_data","call","serializeArray","reduce","carry","name","document","body","on"],"sourceRoot":""}