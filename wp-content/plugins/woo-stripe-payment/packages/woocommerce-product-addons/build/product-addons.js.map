{"version":3,"file":"product-addons.js","mappings":"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","sources":["webpack://wc_stripe/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://wc_stripe/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://wc_stripe/external window \"jQuery\"","webpack://wc_stripe/external window [\"wc_stripe\"]","webpack://wc_stripe/webpack/bootstrap","webpack://wc_stripe/./packages/woocommerce-product-addons/assets/js/product.js"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","module.exports = window[\"jQuery\"];","module.exports = window[\"wc_stripe\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import $ from 'jquery';\nimport {product_gateways as gateways} from '@paymentplugins/wc-stripe';\n\nconst handleFieldChange = (e) => {\n    // when a extra product option field changes, update the cart calculation\n    gateways.forEach(gateway => {\n        if (gateway.maybe_calculate_cart) {\n            gateway.maybe_calculate_cart();\n        }\n    });\n}\n\nconst getExtraProductData = () => {\n    const data = $('form.cart .wc-pao-addon-field').serializeArray().reduce((carry, obj) => {\n        if (/([\\w\\-\\_]+)\\[\\]$/.test(obj.name)) {\n            const name = obj.name.substring(0, obj.name.length - 2);\n            return {\n                ...carry,\n                [name]: [\n                    ...(carry[name] || []),\n                    obj.value\n                ]\n            }\n        }\n        return {...carry, [obj.name]: obj.value};\n    }, {});\n    return data;\n}\n\n$(() => {\n    if (gateways.length) {\n\n        gateways.forEach(gateway => {\n            // add to cart data function wrapper\n            const getAddToCartData = gateway.get_add_to_cart_data;\n            gateway.get_add_to_cart_data = () => {\n                return {\n                    ...getAddToCartData.call(gateway),\n                    ...getExtraProductData()\n                }\n            }\n        });\n\n        $(document.body).on('updated_addons', 'form.cart', handleFieldChange);\n    }\n})"],"names":["module","exports","arr","len","length","i","arr2","Array","arrayLikeToArray","isArray","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__esModule","iter","Symbol","iterator","from","TypeError","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","o","minLen","n","prototype","toString","call","slice","constructor","name","test","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","handleFieldChange","e","gateways","forEach","gateway","maybe_calculate_cart","$","getAddToCartData","get_add_to_cart_data","serializeArray","reduce","carry","substring","document","body","on"],"sourceRoot":""}